---
title: イベント ベースの保持の概要
f1.keywords:
- NOCSH
ms.author: cabailey
author: cabailey
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- M365-security-compliance
search.appverid:
- MOE150
- MET150
description: 保持ラベルを使用すると、特定の種類のイベントが発生したときの保持期間を設定できます。イベントによって保持期間の開始がトリガーされ、その種類のイベントに保持ラベルが適用されているすべてのコンテンツに、ラベルの保持アクションが適用されます。イベント ベースの保持は、通常、記録管理プロセスの一部として使用されます。
ms.openlocfilehash: 100381d87c51a8ef403a88f19159235081c2a8df
ms.sourcegitcommit: 330e9baf02b5bc220d61f777c2338814459626ec
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/27/2020
ms.locfileid: "44385011"
---
# <a name="overview-of-event-driven-retention"></a>イベント ベースの保持の概要

>*[セキュリティとコンプライアンスのための Microsoft 365 ライセンス ガイダンス](https://aka.ms/ComplianceSD)。*

コンテンツを保持する際、保持期間は多くの場合、コンテンツの経過日数に基づいています。たとえば、ドキュメントを作成してから 7 年間保持をし、それから削除することができます。ただし、Microsoft 365の保持ラベルを使用することで、特定の種類のイベントの発生を保持期間の基準として設定することもできます。イベントによって保持期間の開始がトリガーされ、その種類のイベントに保持ラベルが適用されているすべてのコンテンツに、ラベルの保持アクションが適用されます。
  
たとえば、以下のような場合に、イベント ベースの保持のラベルを使用することができます:
  
- **従業員が組織のメンバーでなくなる**: たとえば、ある従業員が組織のメンバーでなくなった場合、その時点から該当従業員のレコードを 10 年間保持しなければならないとします。10 年経過すると、その従業員の雇用、業績、契約終了などに関するすべてのドキュメントを処分する必要があります。この場合は、従業員が組織から離れることが、10 年の保存期間をトリガーするイベントとなります。 
    
- **契約の期限切れ**: たとえば、契約に関連するすべてのレコードを、契約の期限が切れてから 5 年間保持する必要があるとします。この場合、契約の期限切れが、5 年の保存期間をトリガーするイベントとなります。 
    
- **製品の有効期間**: たとえば、組織に、技術仕様などのコンテンツに関して、最終製品製造日に関する保持要件があるとします。この場合、最後に製造された日が、保存期間をトリガーするイベントとなります。 
    
イベント ベースの保持は通常、レコード管理プロセスの一環として使用します。これは以下のことを意味します:
  
- イベント ベースのラベルも通常、コンテンツをレコードとして分類します。詳細については、「[コンテンツ検索を使用した特定の保持ラベルが適用されたすべてのコンテンツの検索](labels.md#using-content-search-to-find-all-content-with-a-specific-retention-label-applied-to-it)」を参照してください。
    
- レコードとして宣言されているもののイベント トリガーがまだ発生していない文書は、イベントがそのドキュメントの保存期間をトリガーするまで無期限に保持されます (レコードを完全に削除することはできません)。
    
- イベント ベースの保持ラベルは通常、保存期間の終了時に廃棄レビューを トリガーするので、レコード管理者は手動で コンテンツを確認して廃棄できます。詳細については、「[コンテンツの廃棄](disposition.md)」を参照してください。
    
イベント ベースの保持ラベルには、Microsoft 365 の保持ラベルと同じ機能があります。詳細については、「[ラベルの概要](labels.md)」を参照してください。

## <a name="understanding-the-relationship-between-event-types-labels-events-and-asset-ids"></a>イベントの種類、ラベル、イベント、アセット ID の関係を理解する

イベント ベースの保持を活用するには、図と以下の説明に示すように、イベントの種類、保持ラベル、イベント、アセット ID の関係を理解することが重要です。 
  
![イベントの種類、ラベル、イベント、アセット ID の図](../media/a5141a6b-61ca-4a60-9ab0-24e6bb45bbdb.png)
  
![イベントの種類、ラベル、イベント、アセット ID の図](../media/ce89a91f-49aa-4b5a-933c-ac3a13dccd5d.png)
  
1. さまざまな種類のコンテンツの保持ラベルを作成してから、イベントの種類に関連付けます。 たとえば、さまざまな種類の製品ファイルとレコードの保持ラベルは、製品を使用しなくなった時点からレコードを 10 年間保持する必要があるため、Product Lifetime という名前のイベントの種類に関連付けられます。
    
2. ユーザー (通常はレコード管理者) はコンテンツにこれらの保持ラベルを適用し、(SharePoint と OneDrive のドキュメントの場合) アイテムごとに資産 ID を入力します。 この例では、資産 ID は組織で使用される製品名またはコードです。 したがって、各製品のレコードには保持ラベルが割り当てられ、各レコードには資産 ID を含むプロパティが含まれます。 この図は組織内のすべての製品レコードの**すべてのコンテンツ**を表しており、各アイテムにはそのレコードに該当する製品の資産 ID が含まれます。 
    
3. Product Lifetime がイベントの種類で、使用しなくなった特定の製品がイベントになります。その種類のイベントが発生したら (上の図の例では、製品を使用しなくなる場合)、以下を指定するイベントを作成します:
    
  - (SharePoint および OneDrive のドキュメントの) アセット ID。
    
  - (Exchange アイテムの) キーワード。上の例において組織は、製品レコードを含むメッセージで製品コードを使用するため、Exchange アイテムのキーワードは  SharePoint および OneDrive ドキュメントのアセット  ID と同じになります。
    
  - イベントが発生した日付。この日付は、保持期間の開始日として使用されます。この日付には、現在、過去、または将来の日付を使用できます。
    
4. イベントの作成後、イベントの日付は、そのイベントの種類の保持ラベルを持ち、指定された資産 ID またはキーワードを含むすべてのコンテンツに同期されます。 その他の保持ラベルと同様に、この同期には最大で 7 日間かかる可能性があります。 前の図では、赤で囲まれているアイテムはすべて、このイベントによって保持期間がトリガーされています。 言い換えれば、この製品の期限が切れたとき、そのイベントがその製品のレコードの保持期間のトリガーとなります。
    
イベントの資産 ID またはキーワードを指定しない場合、そのイベントの種類の保持ラベルの付いた**すべてのコンテンツ**が、イベントによってトリガーされる保持期間を持つことを理解することが重要です。 つまり、前の図の場合であれば、すべてのコンテンツが保持され始めます。 これは、意図したものとは異なる可能性があります。 
  
最後に、それぞれの保持ラベルにはそれぞれの保持設定があることにご注意ください。 この例では、すべて 10 年間に指定されていますが、それぞれのラベルが異なる保持期間を持つ保持ラベルを、1 つのイベントでトリガーすることができます。
  
## <a name="how-to-set-up-event-driven-retention"></a>イベント ドリブンの保持のセットアップ方法

イベント ドリブンの保持のワークフロー概要:
  
![イベント ベースの保持をセットアップするワークフローの図](../media/event-based-retention-process.png)
  
> [!TIP]
> SharePont の管理プロパティを使用して保持ラベルを自動適用し、イベント ドリブンの保持を実装する詳細なシナリオについては、「[保持ラベルを使用した SharePoint ドキュメントのライフサイクルの管理](auto-apply-retention-labels-scenario.md)」を参照してください。

### <a name="step-1-create-a-label-whose-retention-period-is-based-on-an-event"></a>手順 1: 保持期間がイベント ベースのラベルを作成する

Microsoft 365 コンプライアンス センター、Microsoft 365 セキュリティ センター、またはセキュリティ/コンプライアンス センターの左側のナビゲーションで、**[分類]**  >  **[保持ラベル]**  >  **[ラベル]** タブ > **[ラベルの作成]** を選択します。
  
ラベルを作成するときは、保持をオンにしてから、その下に表示されているオプションを選択して、イベント ベースのコンテンツの保持または削除を行います。保持の設定は、**[イベント]** ページでイベントを作成する手順 5 までは、有効になりません。 
  
イベント ドリブンの保持は、通常、レコードとして分類されているコンテンツに使用されることにご注意ください。 そのため、イベントに基づいて保持ラベルを作成する場合、通常は **[このラベルを使用して、コンテンツを "レコード" に分類する]** というオプションを選択します。
  
また、イベント ベースの保持には、以下のような保持の設定が必要になります:
  
- コンテンツを保持する。
    
- 保存期間の終わりに、コンテンツの自動削除または廃棄レビューのトリガーを行う。
    
![ベースにするイベントのラベルのオプション](../media/a4902281-5196-4194-9737-f30231d95861.png)
  
### <a name="step-2-choose-an-event-type-for-that-label"></a>手順 2: そのラベルのイベントの種類を選択する

ラベル設定で、ベースにする**イベント**のラベルのオプションを選択すると、**[イベントの種類を選択する]** オプションが表示されます。イベントの種類は、ラベルを関連付けるイベントに関する、簡単で一般的な説明内容になります。
  
たとえば、Product Lifetime という名前のイベントの種類を作成する場合は、"製品開発ファイル" や "製品の経営的意思決定" など、ラベルを適用するコンテンツの種類が分かるような名前でイベント ベースの保持ラベルを作成する必要があります。
  
一度イベントの種類を選択して保持ラベルを作成すると、イベントの種類の変更はできませんので、ご注意ください。
  
![イベントの種類を作成または選択するオプション](../media/8b7afe79-72cb-462e-81d4-b5ddbe899dbc.png)
  
### <a name="step-3-publish-or-auto-apply-the-event-based-retention-labels"></a>手順 3: イベント ベースの保持ラベルを発行または自動適用する

他の保持ラベルと同じように、イベント ベースのラベルを[発行または自動適用](create-retention-labels.md)する必要があります。したがって、このラベルはコンテンツに手動または自動で適用されます。

> [!NOTE]
> [**レコード管理**] > [**ファイル計画**] タブまたは [**データ ガバナンス**] > [**ラベル**] タブからイベント駆動型の保持ラベルを選択した場合、[**ラベルの自動適用**] ボタンは使用できません。
> 
> このボタンの代わりに、次のいずれかの場所からのラベルまたはポリシーのリストの上にある [**ラベルを自動適用**] オプションを使用します。
> - [**レコード管理**] > [**ラベル ポリシー**] タブ
> - [**データ ガバナンス**] > [**ラベル**] タブまたは [**ラベル ポリシー**] タブ

### <a name="step-4-enter-an-asset-id"></a>手順 4: アセット ID を入力する

イベント ベースのラベルがコンテンツに適用されると、アイテムごとにアセット ID を入力できます。たとえば、組織が使用するのは以下のようなものになります:
  
- 特定の製品のみのコンテンツ保持に使用する製品コード。
    
- 特定の製品のみのコンテンツ保持に使用するプロジェクト コード。
    
- 特定の製品のみのコンテンツ保持に使用する従業員 ID。
    
資産 ID は、SharePoint と OneDrive for Business の単なる別のドキュメント プロパティであることをご理解ください。 組織では別のドキュメント プロパティや ID を既に使用して、コンテンツを分類している場合があります。 その場合は、イベントの作成時にそれらのプロパティと値を使用することもできます (後述する手順 6 を参照してください)。 重要な点は、組織はドキュメント プロパティで property:value の組み合わせを使用して、そのアイテムをイベントの種類に関連付ける必要があるということです。
  
![アセット ID を入力するテキスト ボックス](../media/6d31628e-7162-4370-a8d7-de704aafa350.png)
  
### <a name="step-5-create-an-event"></a>手順 5: イベントを作成する

製品の使用を終えるなど、イベントの種類の特定のインスタンスが発生するときは、セキュリティ &amp; コンプライアンス センターの **[レコード管理]** > **[イベント]** ページに移動し、イベントを作成します。イベントを作成して手動でトリガーする必要があります。
  
### <a name="step-6-choose-the-same-event-type-used-by-the-label-in-step-2"></a>手順 6: 手順 2 でのラベルを使用したイベントの種類と同じものを選択する

イベントを作成するときには、手順 2 の保持ラベルで使用したものと同じイベントの種類 (Product Lifetime など) を選択します。 そのイベントの種類が選択されたイベントに適用されている保持ラベルの付いたコンテンツのみが、トリガーされる保持期間を持ちます。
  
![イベントの種類を選択するイベント設定のオプション](../media/11663591-5628-419e-9537-61eb8f5c741f.png)
  
### <a name="step-7-enter-keywords-or-an-asset-id"></a>手順 7: キーワードまたはアセット ID を入力する

ここで、SharePoint および OneDrive コンテンツのアセット ID または Exchange コンテンツのキーワードを指定して、コンテンツの範囲を絞り込みます。アセット ID の保持は、指定された property:value のペアを持つコンテンツにのみ適用されます。アセット ID が入力されていない場合は、そのイベントの種類のラベルが割り当てられている**すべてのコンテンツ**に、ラベルに適用されているのと同じ保持期限が適用されます。 
  
資産 ID は、SharePoint と OneDrive for Business の単なる別のドキュメント プロパティであることをご理解ください。 資産 ID プロパティを使用する場合は、下に示される資産 ID のボックスに「ComplianceAssetID:\<value\>」と入力します。
  
組織がこのイベントの種類に関連するドキュメントに、他のプロパティと ID を適用している可能性があります。たとえば、特定の製品のレコードを検出する必要がある場合、ID はカスタム プロパティ ProductID と値 "XYZ" の組み合わせになります。この場合、以下に示すアセット ID のボックスには、ProductID:XYZ と入力します。
  
Exchange アイテムの場合は、キーワードを使用できます。AND、OR、NOT などの検索演算子を使って、クエリを絞り込むことができます。演算子の詳細については、「[コンテンツ検索のキーワード クエリと検索条件](keyword-queries-and-search-conditions.md)」を参照してください。
  
最後に、イベントが発生した日付を選択します。この日付が、保持期間の開始日として使用されます。 イベントの作成後、そのイベントの日付は、そのイベントの種類の保持ラベル、資産 ID、キーワードを持つすべてのコンテンツに同期されます。 その他の保持ラベルと同様に、この同期には最大で 7 日間かかる可能性があります。
  
![[イベントの設定] ページ](../media/40d3c9db-f624-49a5-b38a-d16bcce20231.png)
  
## <a name="use-content-search-to-find-all-content-with-a-specific-label-or-asset-id"></a>コンテンツ検索を使用して、特定のラベルまたはアセット ID が適用されたすべてのコンテンツを検索する

保持ラベルをコンテンツに割り当てた後は、特定の保持ラベルで分類されている、または特定の資産 ID を含むすべてのコンテンツをコンテンツ検索を使用して検索することができます。
  
コンテンツ検索を行うときは、次のようにします:
  
- 特定の保持ラベルを持つすべてのコンテンツを検索するには、**[コンプライアンス タグ]** の条件を選択した後、完全なラベル名を入力するか、ラベル名の一部を入力してワイルドカードを使用します。 
    
- 特定のアセット ID を持つすべてのコンテンツを検索するには、**ComplianceAssetID** プロパティと値 (例: ComplianceAssetID:\<value\>) を入力します。 
    
詳細については、「[コンテンツ検索のキーワード クエリと検索条件](keyword-queries-and-search-conditions.md)」を参照してください。
  
## <a name="permissions"></a>アクセス許可

**[イベント]** ページにアクセスするには、レビュー担当者は、**廃棄管理**の役割と**監査ログの閲覧限定**の役割を持つ、役割グループのメンバーである必要があります。Disposition Reviewers という新しい役割グループを作成し、これら 2 つの役割をその役割グループに追加して、それからメンバーをその役割グループに追加することをお勧めします。 
  
詳細については、「[ユーザーにセキュリティ/コンプライアンス センターへのアクセス権を付与する](../security/office-365-security/grant-access-to-the-security-and-compliance-center.md)」を参照してください。
  
## <a name="automate-events-by-using-powershell"></a>PowerShell を使用してイベントを自動化する

管理センターでは、手動でのみイベントを作成できます。イベントが発生したときに自動的にイベントをトリガーすることはできません。ただし、Rest APIを使用することでイベントを自動的にトリガーすることはできます。詳しくは、[イベント ベース保持の自動化](automate-event-driven-retention.md)を参照してください。

PowerShellスクリプトを使用して、業務用アプリケーションからのイベント ベースの保持を自動化することもできます。 イベント ドリブンの保持で利用可能な PowerShell コマンドレットは、次のとおりです。
  
- [Get-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873002)
    
- [New-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873004)
    
- [Remove-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873005)
    
- [Set-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873006)
    
- [Get-ComplianceRetentionEvent](https://go.microsoft.com/fwlink/?linkid=873001)
    
- [New-ComplianceRetentionEvent](https://go.microsoft.com/fwlink/?linkid=873003)
    

